(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.item,r=e.handleCardClick,o=e.templateSelector,i=e.userId,a=e.handlerOpenDeletePopup,u=e.handlerLikeAdd;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._item=n,this._title=n.name,this._image=n.link,this._alt=n.name,this._likes=n.likes,this._ownerId=n.owner._id,this.cardId=n._id,this._userId=i,this._templateSelector=document.querySelector(o),this._handleCardClick=r,this.handlerOpenDeletePopup=a,this._handlerLikeAdd=u}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return this._templateSelector.content.querySelector(".card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__button").addEventListener("click",(function(){e._handlerLikeAdd(e)})),this._element.querySelector(".card__remove-button").addEventListener("click",(function(){e.handlerOpenDeletePopup()})),this._element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick(e._image,e._title)}))}},{key:"_deleteButton",value:function(){this._ownerId===this._userId&&this._element.querySelector(".card__remove-button").classList.add("card__remove-button_visible")}},{key:"likeContains",value:function(){return this._isLikeContains}},{key:"handlerLike",value:function(e){var t=this;this._isLikeContains=e.likes.some((function(e){return e._id===t._userId})),this._element.querySelector(".card__botton-counter").textContent=e.likes.length,this._isLikeContains?this._element.querySelector(".card__button").classList.add("card__button_active"):this._element.querySelector(".card__button").classList.remove("card__button_active")}},{key:"handlerDeleteCard",value:function(){this._element.remove()}},{key:"handlerCardIdReturn",value:function(){return this.cardId}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._deleteButton(),this.handlerLike(this._item),this._element.querySelector(".card__title").textContent=this._title,this._element.querySelector(".card__image").src=this._image,this._element.querySelector(".card__image").alt=this._alt,this._element}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_showInputError",(function(e,t){var n=o._form.querySelector(".".concat(e.id,"-error"));e.classList.add(o._inputErrorClass),n.textContent=t,n.classList.add(o._errorClass)})),r(this,"_hideInputError",(function(e){var t=o._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(o._inputErrorClass),t.classList.remove(o._errorClass),t.textContent=""})),r(this,"_сheckInputValidity",(function(e){!e.validity.valid||e.validity.typeMismatch?o._showInputError(e,e.validationMessage):o._hideInputError(e)})),r(this,"_setEventListener",(function(){o._toggleButtonState(),o._handlerEneterClickRemove(),o._inputList.forEach((function(e){e.addEventListener("input",(function(){o._сheckInputValidity(e),o._toggleButtonState()}))}))})),r(this,"_toggleButtonState",(function(){o._hasInvalidInput()?o._buttonElement.classList.add(o._inactiveButtonClass):o._buttonElement.classList.remove(o._inactiveButtonClass)})),r(this,"_hasInvalidInput",(function(){return o._inputList.some((function(e){return!e.validity.valid}))})),r(this,"enableValidation",(function(){o._setEventListener(),o._form.addEventListener("submit",(function(e){e.preventDefault()}))})),this._form=n,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var t,o;return t=e,(o=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_handlerEneterClickRemove",value:function(){this._form.addEventListener("keydown",this._enterClickRemove)}},{key:"_enterClickRemove",value:function(e){"Enter"===e.key&&e.preventDefault()}}])&&n(t.prototype,o),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.append(e)}}])&&i(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){var n=t.userName,r=t.userJob,o=t.userAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._titleName=document.querySelector(n),this._subtitlJob=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){this._titleName.textContent=e.name,this._subtitlJob.textContent=e.about,this._userAvatar.src=e.avatar,this._userId=e._id}},{key:"getUserInfo",value:function(){return{name:this._titleName.textContent,about:this._subtitlJob.textContent,avatar:this._userAvatar,userId:this._userId}}}])&&u(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handlerEscClose=this._handlerEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handlerEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handlerEscClose)}},{key:"_handlerEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleCloseOverlay",value:function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-button"))&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){e._handleCloseOverlay(t)}))}}])&&s(t.prototype,n),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imagePopup=t._popup.querySelector(".popup__image"),t._titlePopup=t._popup.querySelector(".popup__subtitle"),t}return t=a,(n=[{key:"open",value:function(e,t){this._titlePopup.textContent=t,this._imagePopup.src=e,this._imagePopup.alt=t,h(y(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),a}(l);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".form"),n._handleFormSubmit=t,n._button=n._popup.querySelector(".form__save-button"),n._inputList=n._form.querySelectorAll(".form__user-info"),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit(e._getInputValues())})),g(E(a.prototype),"setEventListeners",this).call(this)}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){g(E(a.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Сохранить";this._button.textContent=e?"Сохранение...":t}}])&&b(t.prototype,n),a}(l);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"postCards",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"handlerdeleteCards",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"changeLikeCard",value:function(e,t){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfoFromServer",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"updateUserData",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this._checkResponse)}}])&&w(t.prototype,n),e}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._botton=t._popup.querySelector(".popup__save-button"),t}return t=a,(n=[{key:"handleFormDelete",value:function(e){this._handleFormSubmit=e}},{key:"setEventListeners",value:function(){var e=this;I(q(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit()}))}},{key:"renderLoading",value:function(e){this._botton.textContent=e?"Удаление...":"Да"}}])&&P(t.prototype,n),a}(l),B=document.querySelector(".grid-galery"),D=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile__add-button"),V=document.querySelector(".popup_type_edit"),U=V.querySelector(".form"),N=V.querySelector(".form__user-info_user_name"),F=V.querySelector(".form__user-info_user_job"),J=document.querySelector(".popup_type_new-card").querySelector(".form"),M=document.querySelector(".profile__avatar"),G=document.querySelector(".popup_type_avatar").querySelector(".form"),H={formSelector:".form",inputSelector:".form__user-info",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"form__error_visible"};function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=new o(H,J),K=new o(H,U),Q=new o(H,G);$.enableValidation(),K.enableValidation(),Q.enableValidation();var W=new L({url:"https://mesto.nomoreparties.co/v1/cohort-26",headers:{authorization:"bf09fd5b-3c45-4e70-9b69-806c8df2b150","Content-Type":"application/json"}}),X=new c({userName:".profile__name",userJob:".profile__career",userAvatar:".profile__avatar"}),Y=new C(".popup_type_edit",(function(e){W.updateUserData(e).then((function(e){X.setUserInfo(e),Y.close()})).catch((function(e){console.log(e)})).finally((function(){Y.renderLoading(!1,"Сохранить")}))}));Y.setEventListeners(),D.addEventListener("click",(function(){Y.open();var e=X.getUserInfo();N.value=e.name,F.value=e.about,K.resetValidation()})),M.addEventListener("click",(function(){Z.open(),Q.resetValidation()}));var Z=new C(".popup_type_avatar",(function(e){W.updateUserAvatar(e).then((function(e){X.setUserInfo(e),Z.close()})).catch((function(e){console.log(e)})).finally((function(){Z.renderLoading(!1,"Сохранить")}))}));Z.setEventListeners();var ee=new v(".popup_type_image");ee.setEventListeners();var te=new C(".popup_type_new-card",(function(e){W.postCards(e).then((function(e){B.prepend(oe(e)),te.close()})).catch((function(e){console.log(e)})).finally((function(){te.renderLoading(!1,"Создать")}))}));te.setEventListeners(),x.addEventListener("click",(function(){te.open(),$.resetValidation()}));var ne=new a({renderer:function(e){ne.addItem(oe(e))}},B);function re(e,t){ee.open(e,t)}function oe(e){var n=new t({item:e,handleCardClick:re,templateSelector:"#template-card",userId:T,handlerOpenDeletePopup:function(){return function(e){ie.open(),ie.handleFormDelete((function(){W.handlerdeleteCards(e.handlerCardIdReturn()).then((function(){e.handlerDeleteCard(),ie.close()})).catch((function(e){console.log(e)})).finally((function(){ie.renderLoading(!1)}))}))}(n)},handlerLikeAdd:function(){return function(e){W.changeLikeCard(e.cardId,e.likeContains()).then((function(t){e.handlerLike(t)})).catch((function(e){console.log(e)}))}(n)}});return n.generateCard()}Promise.all([W.getInitialCards(),W.getUserInfoFromServer()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];T=i._id,ne.renderItems(o),X.setUserInfo(i)})).catch((function(e){console.log(e)}));var ie=new A(".popup_delete_image");ie.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiXSwibmFtZXMiOlsiQ2FyZCIsIml0ZW0iLCJoYW5kbGVDYXJkQ2xpY2siLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwidXNlcklkIiwiaGFuZGxlck9wZW5EZWxldGVQb3B1cCIsImhhbmRsZXJMaWtlQWRkIiwidGhpcyIsIl9pdGVtIiwiX3RpdGxlIiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJfYWx0IiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVyIiwiX2lkIiwiY2FyZElkIiwiX3VzZXJJZCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVyTGlrZUFkZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaXNMaWtlQ29udGFpbnMiLCJzb21lIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJyZW1vdmUiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfZGVsZXRlQnV0dG9uIiwiaGFuZGxlckxpa2UiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsImZvcm1TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9mb3JtIiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwidHlwZU1pc21hdGNoIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFuZGxlckVuZXRlckNsaWNrUmVtb3ZlIiwiX2lucHV0TGlzdCIsImZvckVhY2giLCJf0YFoZWNrSW5wdXRWYWxpZGl0eSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX3NldEV2ZW50TGlzdGVuZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2VudGVyQ2xpY2tSZW1vdmUiLCJrZXkiLCJTZWN0aW9uIiwiY29udGFpbmVyIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsInVzZXJBdmF0YXIiLCJfdGl0bGVOYW1lIiwiX3N1YnRpdGxKb2IiLCJfdXNlckF2YXRhciIsImFib3V0IiwiYXZhdGFyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZXJFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9oYW5kbGVDbG9zZU92ZXJsYXkiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZVBvcHVwIiwiX3RpdGxlUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2J1dHRvbiIsInJlbmRlckxvYWRpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImlzTG9hZGluZyIsInRleHRCdXR0b25EZWZhdWx0IiwiQXBpIiwiY29uZmlnIiwiX3VybCIsInVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIl9jaGVja1Jlc3BvbnNlIiwibGlrZSIsIlBvcHVwV2l0aFN1Ym1pdCIsIl9ib3R0b24iLCJvY2Nhc2lvbiIsImNhcmRMaXN0IiwicG9wdXBUeXBlRWRpdEJ1dHRvbk9wZW4iLCJwb3B1cFR5cGVJbWFnZUFkZFBob3RvQnV0dG9uIiwicG9wdXBUeXBlRWRpdCIsImZvcm1FbGVtZW50UG9wdXBUeXBlRWRpdCIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiZm9ybUVsZW1lbnROZXdDYXJkIiwiYnV0dG9uT3BlblBvcHVwVXNlckF2YXRhciIsImZvcm1FbGVtZW50UG9wdXBOZXdBdmF0YXIiLCJmb3JtQXJyYXkiLCJmb3JtRWxlbWVudE5ld0NhcmRWYWxpZGF0ZSIsImZvcm1FbGVtZW50UG9wdXBUeXBlRWRpdFZhbGlkYXRlIiwiZm9ybUVsZW1lbnRQb3B1cE5ld0F2YXRhclZhbGlkYXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsInBvcHVwV2l0aFVzZXJJbmZvIiwidXBkYXRlVXNlckRhdGEiLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsIm9wZW4iLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwicG9wdXBDaGFuZ2VVc2VyQXZhdGFyIiwidXBkYXRlVXNlckF2YXRhciIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBXaXRoUGhvdG9Gb3JtIiwicG9zdENhcmRzIiwiY3JlYXRlQ2FyZCIsImNhcmRzIiwiYWRkSXRlbSIsImNhcmQiLCJwb3B1cERlbGV0ZUNhcmQiLCJoYW5kbGVGb3JtRGVsZXRlIiwiaGFuZGxlcmRlbGV0ZUNhcmRzIiwiaGFuZGxlckNhcmRJZFJldHVybiIsImhhbmRsZXJEZWxldGVDYXJkIiwiaGFuZGxlckRlbGV0ZSIsImNoYW5nZUxpa2VDYXJkIiwibGlrZUNvbnRhaW5zIiwiZ2VuZXJhdGVDYXJkIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm9Gcm9tU2VydmVyIiwiZGF0YUNhcmRzIiwiZGF0YVVzZXIiLCJyZW5kZXJJdGVtcyJdLCJtYXBwaW5ncyI6IjZMQUFxQkEsRSxXQUNqQixjQUF5RyxJQUEzRkMsRUFBMkYsRUFBM0ZBLEtBQU1DLEVBQXFGLEVBQXJGQSxnQkFBaUJDLEVBQW9FLEVBQXBFQSxpQkFBa0JDLEVBQWtELEVBQWxEQSxPQUFRQyxFQUEwQyxFQUExQ0EsdUJBQXdCQyxFQUFrQixFQUFsQkEsZ0IsNEZBQWtCLFNBQ3JHQyxLQUFLQyxNQUFR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QUFDQyxHQUNKQyxRQUFRQyxJQUFJRixNQUVmRyxTQUFRLFdBQ0xlLEdBQWdCdkUsZUFBYyxTQVdSNEUsQ0FBY04sSUFDNUNyTCxlQUFnQixrQkFTeEIsU0FBcUJxTCxHQUNqQnhCLEVBQUkrQixlQUFlUCxFQUFLeEssT0FBUXdLLEVBQUtRLGdCQUNoQ3hELE1BQUssU0FBQzFJLEdBQ0gwTCxFQUFLbkosWUFBWXZDLE1BRXBCd0ssT0FBTSxTQUFDQyxHQUNKQyxRQUFRQyxJQUFJRixNQWZNbEksQ0FBWW1KLE1BR3RDLE9BQU9BLEVBQUtTLGVBekNoQjlELFFBQVErRCxJQUFJLENBQUNsQyxFQUFJbUMsa0JBQW1CbkMsRUFBSW9DLDBCQUNuQzVELE1BQUssWUFBMkIsSSxJQUFBLEcsRUFBQSxFLDRDQUFBLEksZ3hCQUF6QjZELEVBQXlCLEtBQWRDLEVBQWMsS0FDN0JyTSxFQUFTcU0sRUFBU3ZMLElBQ2xCdUssR0FBTWlCLFlBQVlGLEdBQ2xCbkMsRUFBU0csWUFBWWlDLE1BRXhCaEMsT0FBTSxTQUFDQyxHQUNKQyxRQUFRQyxJQUFJRixNQXFDcEIsSUFBTWtCLEdBQWtCLElBQUkzQyxFQUFnQix1QkFDNUMyQyxHQUFnQmQscUIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQgeyBcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW0sIGhhbmRsZUNhcmRDbGljaywgdGVtcGxhdGVTZWxlY3RvciwgdXNlcklkLCBoYW5kbGVyT3BlbkRlbGV0ZVBvcHVwLCBoYW5kbGVyTGlrZUFkZCB9KSB7IFxuICAgICAgICB0aGlzLl9pdGVtID0gaXRlbTtcbiAgICAgICAgdGhpcy5fdGl0bGUgPSBpdGVtLm5hbWU7IFxuICAgICAgICB0aGlzLl9pbWFnZSA9IGl0ZW0ubGluazsgXG4gICAgICAgIHRoaXMuX2FsdCA9IGl0ZW0ubmFtZTtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBpdGVtLmxpa2VzO1xuICAgICAgICB0aGlzLl9vd25lcklkID0gaXRlbS5vd25lci5faWQ7XG4gICAgICAgIHRoaXMuY2FyZElkID0gaXRlbS5faWQ7XG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGVTZWxlY3Rvcik7IFxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgICAgIHRoaXMuaGFuZGxlck9wZW5EZWxldGVQb3B1cCA9IGhhbmRsZXJPcGVuRGVsZXRlUG9wdXA7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJMaWtlQWRkID0gaGFuZGxlckxpa2VBZGQ7XG4gICAgfSBcbiBcbiAgICBfZ2V0VGVtcGxhdGUoKSB7IFxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpOyBcbiBcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50OyBcbiAgICB9IFxuIFxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHsgXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVyTGlrZUFkZCh0aGlzKTsgXG4gICAgICAgIH0pOyBcbiBcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3JlbW92ZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHsgXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJPcGVuRGVsZXRlUG9wdXAoKTsgXG4gICAgICAgIH0pOyBcbiBcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7IFxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2ltYWdlLCB0aGlzLl90aXRsZSk7IFxuICAgICAgICB9KTsgXG4gICAgfSBcblxuICAgIF9kZWxldGVCdXR0b24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9vd25lcklkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3JlbW92ZS1idXR0b25cIikuY2xhc3NMaXN0LmFkZChcImNhcmRfX3JlbW92ZS1idXR0b25fdmlzaWJsZVwiKTtcbiAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGxpa2VDb250YWlucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzTGlrZUNvbnRhaW5zXG4gICAgfVxuXG4gICAgaGFuZGxlckxpa2UoaXRlbSkgeyBcbiAgICAgICAgdGhpcy5faXNMaWtlQ29udGFpbnMgPSBpdGVtLmxpa2VzLnNvbWUoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgcmV0dXJuIGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19ib3R0b24tY291bnRlclwiKS50ZXh0Q29udGVudCA9IGl0ZW0ubGlrZXMubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5faXNMaWtlQ29udGFpbnMpIHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b25cIikuY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbl9hY3RpdmVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19idXR0b25fYWN0aXZlXCIpOyBcbiAgICAgICAgfVxuICAgIH0gXG4gXG4gICAgaGFuZGxlckRlbGV0ZUNhcmQoKSB7IFxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpOyBcbiAgICB9XG5cbiAgICBoYW5kbGVyQ2FyZElkUmV0dXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYXJkSWQ7XG4gICAgfVxuIFxuICAgIGdlbmVyYXRlQ2FyZCgpIHsgXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpOyBcbiBcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXG5cbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uKCk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVyTGlrZSh0aGlzLl9pdGVtKTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTsgXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9pbWFnZTsgXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9hbHQ7XG4gXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50OyBcbiAgICB9IFxufSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGZvcm0sIGZvcm1TZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybVNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gZm9ybS5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGZvcm0uc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBmb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGZvcm0uaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gZm9ybS5lcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9O1xuXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfTtcblxuICAgIF/RgWhlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCB8fCBpbnB1dEVsZW1lbnQudmFsaWRpdHkudHlwZU1pc21hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlckVuZXRlckNsaWNrUmVtb3ZlKCk7XG5cbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5f0YFoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9oYW5kbGVyRW5ldGVyQ2xpY2tSZW1vdmUoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2VudGVyQ2xpY2tSZW1vdmUpXG4gICAgfVxuXG4gICAgX2VudGVyQ2xpY2tSZW1vdmUoZXZ0KSB7XG4gICAgICAgIGlmKGV2dC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICB9XG4gICAgfVxuXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7dXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXJ9KSB7XG4gICAgICAgIHRoaXMuX3RpdGxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xuICAgICAgICB0aGlzLl9zdWJ0aXRsSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iKTtcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcik7XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oaXRlbSkge1xuICAgICAgICB0aGlzLl90aXRsZU5hbWUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7IFxuICAgICAgICB0aGlzLl9zdWJ0aXRsSm9iLnRleHRDb250ZW50ID0gaXRlbS5hYm91dDsgXG4gICAgICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gaXRlbS5hdmF0YXI7XG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IGl0ZW0uX2lkO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fdGl0bGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgYWJvdXQ6IHRoaXMuX3N1YnRpdGxKb2IudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhdmF0YXI6IHRoaXMuX3VzZXJBdmF0YXIsXG4gICAgICAgICAgICB1c2VySWQ6IHRoaXMuX3VzZXJJZFxuICAgICAgICB9IFxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZXJFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVyRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlckVzY0Nsb3NlKVxuICAgIH1cblxuICAgIF9oYW5kbGVyRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFuZGxlQ2xvc2VPdmVybGF5KGV2dCkge1xuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2xvc2VPdmVybGF5KGV2dCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWFnZVBvcHVwID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gICAgICAgIHRoaXMuX3RpdGxlUG9wdXAgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJ0aXRsZVwiKTtcbiAgICB9XG5cbiAgICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICAgICAgdGhpcy5fdGl0bGVQb3B1cC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2ltYWdlUG9wdXAuc3JjID0gbGluaztcbiAgICAgICAgdGhpcy5faW1hZ2VQb3B1cC5hbHQgPSBuYW1lO1xuXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59XG5cbiIsIlxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7IFxuIFxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHsgXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkgeyBcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IFxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpOyBcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7IFxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3NhdmUtYnV0dG9uXCIpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9fdXNlci1pbmZvXCIpOyBcbiAgICB9IFxuIFxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkgeyBcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7IFxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IFxuXG4gICAgICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7IFxuICAgICAgICB9KTsgXG4gXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxuICAgIH0gXG4gXG4gICAgX2dldElucHV0VmFsdWVzKCkgeyBcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9OyBcbiBcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAodGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKSk7IFxuIFxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlczsgXG4gICAgfSBcbiBcbiAgICBjbG9zZSgpIHsgXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7IFxuIFxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7IFxuICAgIH0gXG5cbiAgICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZyA9IGZhbHNlLCB0ZXh0QnV0dG9uRGVmYXVsdCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpIHtcblxuICAgICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgdGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IFxuXG4gICAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IHRleHRCdXR0b25EZWZhdWx0O1xuICAgIH1cbn0gXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgIHRoaXMuX3VybCA9IGNvbmZpZy51cmw7XG4gICAgICB0aGlzLl9oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHBvc3RDYXJkcyhpdGVtKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgbGluazogaXRlbS5saW5rLFxuICAgICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGhhbmRsZXJkZWxldGVDYXJkcyhpdGVtKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpdGVtfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBjaGFuZ2VMaWtlQ2FyZChpdGVtLCBsaWtlKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvbGlrZXMvJHtpdGVtfWAsIHtcbiAgICAgICAgbWV0aG9kOiBsaWtlID8gJ0RFTEVURScgOiAnUFVUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBnZXRVc2VySW5mb0Zyb21TZXJ2ZXIoKSB7XG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgdXBkYXRlVXNlckRhdGEoaXRlbSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgYWJvdXQ6IGl0ZW0uYWJvdXRcbiAgICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICB1cGRhdGVVc2VyQXZhdGFyKGl0ZW0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBhdmF0YXI6IGl0ZW0ubGluayxcbiAgICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cbn1cblxuIiwibGV0IHVzZXJJZDtcblxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanNcIjtcblxuaW1wb3J0IHsgXG4gICAgZm9ybUFycmF5LFxuICAgIGNhcmRMaXN0LCBcbiAgICBwb3B1cFR5cGVFZGl0QnV0dG9uT3BlbiwgXG4gICAgcG9wdXBUeXBlSW1hZ2VBZGRQaG90b0J1dHRvbiwgXG4gICAgZm9ybUVsZW1lbnRQb3B1cFR5cGVFZGl0LCBcbiAgICBuYW1lSW5wdXQsIFxuICAgIGpvYklucHV0LCBcbiAgICBmb3JtRWxlbWVudE5ld0NhcmQsXG4gICAgYnV0dG9uT3BlblBvcHVwVXNlckF2YXRhciwgXG4gICAgZm9ybUVsZW1lbnRQb3B1cE5ld0F2YXRhclxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgZm9ybUVsZW1lbnROZXdDYXJkVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQXJyYXksIGZvcm1FbGVtZW50TmV3Q2FyZCk7XG5jb25zdCBmb3JtRWxlbWVudFBvcHVwVHlwZUVkaXRWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1BcnJheSwgZm9ybUVsZW1lbnRQb3B1cFR5cGVFZGl0KTtcbmNvbnN0IGZvcm1FbGVtZW50UG9wdXBOZXdBdmF0YXJWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1BcnJheSwgZm9ybUVsZW1lbnRQb3B1cE5ld0F2YXRhcik7XG5cbmZvcm1FbGVtZW50TmV3Q2FyZFZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1FbGVtZW50UG9wdXBUeXBlRWRpdFZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1FbGVtZW50UG9wdXBOZXdBdmF0YXJWYWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgICB1cmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yNlwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiZjA5ZmQ1Yi0zYzQ1LTRlNzAtOWI2OS04MDZjOGRmMmIxNTBcIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfSxcbn07XG5jb25zdCBhcGkgPSBuZXcgQXBpKGNvbmZpZyk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICB1c2VyTmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxuICAgIHVzZXJKb2I6IFwiLnByb2ZpbGVfX2NhcmVlclwiLFxuICAgIHVzZXJBdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1Vc2VySW5mb1N1Ym1pdChpdGVtKSB7XG4gICAgYXBpLnVwZGF0ZVVzZXJEYXRhKGl0ZW0pXG4gICAgICAgIC50aGVuKChpdGVtKSA9PiB7XG4gICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpdGVtKTtcbiAgICAgICAgICAgIHBvcHVwV2l0aFVzZXJJbmZvLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBwb3B1cFdpdGhVc2VySW5mby5yZW5kZXJMb2FkaW5nKGZhbHNlLCBcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcbiAgICAgICAgfSk7XG59XG5cbmNvbnN0IHBvcHVwV2l0aFVzZXJJbmZvID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9lZGl0XCIsIGhhbmRsZUZvcm1Vc2VySW5mb1N1Ym1pdCk7XG5wb3B1cFdpdGhVc2VySW5mby5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kZWxPcGVuUG9wdXBUeXBlVXNlckluZm8oKSB7XG4gICAgcG9wdXBXaXRoVXNlckluZm8ub3BlbigpO1xuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gdXNlckRhdGEuYWJvdXQ7XG4gICAgZm9ybUVsZW1lbnRQb3B1cFR5cGVFZGl0VmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XG59XG5cbnBvcHVwVHlwZUVkaXRCdXR0b25PcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kZWxPcGVuUG9wdXBUeXBlVXNlckluZm8pO1xuXG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1Vc2VyQXZhdGFyU3VibWl0KGl0ZW0pIHtcbiAgICBhcGkudXBkYXRlVXNlckF2YXRhcihpdGVtKVxuICAgICAgICAudGhlbigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oaXRlbSk7XG4gICAgICAgICAgICBwb3B1cENoYW5nZVVzZXJBdmF0YXIuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHBvcHVwQ2hhbmdlVXNlckF2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlLCBcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcbiAgICAgICAgfSk7XG59XG5cbmJ1dHRvbk9wZW5Qb3B1cFVzZXJBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cENoYW5nZVVzZXJBdmF0YXIub3BlbigpO1xuICAgIGZvcm1FbGVtZW50UG9wdXBOZXdBdmF0YXJWYWxpZGF0ZS5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5jb25zdCBwb3B1cENoYW5nZVVzZXJBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2F2YXRhclwiLCBoYW5kbGVGb3JtVXNlckF2YXRhclN1Ym1pdCk7XG5wb3B1cENoYW5nZVVzZXJBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcm1JbWFnZVN1Ym1pdChpdGVtKSB7XG4gICAgYXBpLnBvc3RDYXJkcyhpdGVtKVxuICAgICAgICAudGhlbigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY2FyZExpc3QucHJlcGVuZChjcmVhdGVDYXJkKGl0ZW0pKTtcbiAgICAgICAgICAgIHBvcHVwV2l0aFBob3RvRm9ybS5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgcG9wdXBXaXRoUGhvdG9Gb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UsIFwi0KHQvtC30LTQsNGC0YxcIik7XG4gICAgICAgIH0pO1xufVxuXG5jb25zdCBwb3B1cFdpdGhQaG90b0Zvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX25ldy1jYXJkXCIsIGhhbmRsZUZvcm1JbWFnZVN1Ym1pdCk7XG5wb3B1cFdpdGhQaG90b0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGVsT3BlblBvcHVwVHlwZUltYWdlKCkge1xuICAgIHBvcHVwV2l0aFBob3RvRm9ybS5vcGVuKCk7XG4gICAgZm9ybUVsZW1lbnROZXdDYXJkVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XG59XG5cbnBvcHVwVHlwZUltYWdlQWRkUGhvdG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRlbE9wZW5Qb3B1cFR5cGVJbWFnZSk7XG5cbmNvbnN0IGNhcmRzID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNhcmRzLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBjYXJkTGlzdFxuKTtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRJbml0aWFsQ2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvRnJvbVNlcnZlcigpXSlcbiAgICAudGhlbigoW2RhdGFDYXJkcywgZGF0YVVzZXJdKSA9PiB7XG4gICAgICAgIHVzZXJJZCA9IGRhdGFVc2VyLl9pZDtcbiAgICAgICAgY2FyZHMucmVuZGVySXRlbXMoZGF0YUNhcmRzKTtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YVVzZXIpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGxpbmssIG5hbWUpIHtcbiAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGxpbmssIG5hbWUpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVyRGVsZXRlKGNhcmQpIHtcbiAgICBwb3B1cERlbGV0ZUNhcmQub3BlbigpO1xuICAgIHBvcHVwRGVsZXRlQ2FyZC5oYW5kbGVGb3JtRGVsZXRlKCgpID0+IHtcbiAgICAgICAgYXBpLmhhbmRsZXJkZWxldGVDYXJkcyhjYXJkLmhhbmRsZXJDYXJkSWRSZXR1cm4oKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjYXJkLmhhbmRsZXJEZWxldGVDYXJkKCk7XG4gICAgICAgICAgICAgICAgcG9wdXBEZWxldGVDYXJkLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZUNhcmQucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgaXRlbTogaXRlbSxcbiAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgICAgIHRlbXBsYXRlU2VsZWN0b3I6IFwiI3RlbXBsYXRlLWNhcmRcIixcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGhhbmRsZXJPcGVuRGVsZXRlUG9wdXA6ICgpID0+IGhhbmRsZXJEZWxldGUoY2FyZCksXG4gICAgICAgIGhhbmRsZXJMaWtlQWRkOiAoKSA9PiBoYW5kbGVyTGlrZShjYXJkKSxcbiAgICB9KTtcbiAgIFxuICAgIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLnBvcHVwX2RlbGV0ZV9pbWFnZVwiKTtcbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVyTGlrZShjYXJkKSB7XG4gICAgYXBpLmNoYW5nZUxpa2VDYXJkKGNhcmQuY2FyZElkLCBjYXJkLmxpa2VDb250YWlucygpKVxuICAgICAgICAudGhlbigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY2FyZC5oYW5kbGVyTGlrZShpdGVtKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYm90dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIik7XG4gICAgfVxuXG4gICAgaGFuZGxlRm9ybURlbGV0ZShvY2Nhc2lvbikge1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gb2NjYXNpb247XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9ib3R0b24udGV4dENvbnRlbnQgPSBcItCj0LTQsNC70LXQvdC40LUuLi5cIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYm90dG9uLnRleHRDb250ZW50ID0gXCLQlNCwXCJcbiAgICAgICAgfVxuICAgIH1cbn0iLCJjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZC1nYWxlcnlcIik7XG5cbmNvbnN0IHBvcHVwVHlwZUVkaXRCdXR0b25PcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHBvcHVwVHlwZUltYWdlQWRkUGhvdG9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmNvbnN0IHBvcHVwVHlwZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdFwiKTtcbmNvbnN0IGZvcm1FbGVtZW50UG9wdXBUeXBlRWRpdCA9IHBvcHVwVHlwZUVkaXQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuY29uc3QgbmFtZUlucHV0ID0gcG9wdXBUeXBlRWRpdC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3VzZXItaW5mb191c2VyX25hbWVcIik7XG5jb25zdCBqb2JJbnB1dCA9IHBvcHVwVHlwZUVkaXQucXVlcnlTZWxlY3RvcihcIi5mb3JtX191c2VyLWluZm9fdXNlcl9qb2JcIik7XG5jb25zdCBwb3B1cFR5cGVOZXdDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX25ldy1jYXJkXCIpO1xuY29uc3QgZm9ybUVsZW1lbnROZXdDYXJkID0gcG9wdXBUeXBlTmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5cbmNvbnN0IGJ1dHRvbk9wZW5Qb3B1cFVzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcbmNvbnN0IHBvcHVwTmV3QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2F2YXRhclwiKTtcbmNvbnN0IGZvcm1FbGVtZW50UG9wdXBOZXdBdmF0YXIgPSBwb3B1cE5ld0F2YXRhci5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG5cbmNvbnN0IGZvcm1BcnJheSA9IHtcbiAgICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX191c2VyLWluZm9cIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc2F2ZS1idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCJcbn07XG5cbmV4cG9ydCB7IFxuICAgIGZvcm1BcnJheSxcbiAgICBjYXJkTGlzdCwgXG4gICAgcG9wdXBUeXBlRWRpdEJ1dHRvbk9wZW4sIFxuICAgIHBvcHVwVHlwZUltYWdlQWRkUGhvdG9CdXR0b24sIFxuICAgIGZvcm1FbGVtZW50UG9wdXBUeXBlRWRpdCwgXG4gICAgbmFtZUlucHV0LCBcbiAgICBqb2JJbnB1dCwgXG4gICAgZm9ybUVsZW1lbnROZXdDYXJkLFxuICAgIGJ1dHRvbk9wZW5Qb3B1cFVzZXJBdmF0YXIsXG4gICAgZm9ybUVsZW1lbnRQb3B1cE5ld0F2YXRhclxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=